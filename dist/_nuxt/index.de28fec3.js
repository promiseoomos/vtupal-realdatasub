import{_ as H}from"./WelcomeBase.8ace50e6.js";import{q as O,r as u,M as R,f as j,a as i,h as z,b as l,w as K,i as m,v as _,u as t,j as d,A as $,F as P,B as W,t as k,k as N,l as Y,o as c}from"./entry.a5fcd4f4.js";import{g as G}from"./getters.6b35f56b.js";import"./ModalBase.57ba2d8e.js";import"./useStrings.2b5df556.js";import"./vend.e5739c9e.js";const I={class:"text-left p-3 bg-white rounded-md"},J=["onSubmit"],Q={class:"mt-3"},X=l("label",{class:"block mb-3 pl-2 font-medium text-lg",for:"first_name"},"First Name:",-1),Z={class:"mt-3"},ee=l("label",{class:"block mb-3 pl-2 font-medium text-lg",for:"last_name"},"Last Name:",-1),te={class:"mt-3"},ae=l("label",{class:"block mb-3 pl-2 font-medium text-lg",for:"email"},"Email:",-1),le={class:"mt-3"},ne=l("label",{class:"block mb-3 pl-2 font-medium text-lg",for:"phone"},"Phone:",-1),re={key:0,class:""},se=["innerHTML"],oe={class:"mt-3"},ue=l("label",{class:"block mb-3 pl-2 font-medium text-lg",for:"bank_name"},"Bank Name:",-1),ie={key:0,class:"rounded-md bg-gray-200 mt-1 overflow-y-auto max-h-56"},ce=["onClick"],de={key:1,class:"mt-1 px-2 text-red-600 font-semibold"},me={class:"mt-3"},_e=l("label",{class:"block mb-3 pl-2 font-medium text-lg",for:"account_number"},"Account Number:",-1),pe={key:0,class:""},fe=["innerHTML"],be={class:"mt-3"},ge=l("label",{class:"block mb-3 pl-2 font-medium text-lg",for:"account_name"},"Account Name:",-1),ve={key:0,class:"animate-pulse font-semibold text-yellow-600"},he={class:"mt-3"},ke=l("label",{class:"block mb-3 pl-2 font-medium text-lg",for:"last_name"},"Referral Code:",-1),ye={key:0},xe={class:"text-center p-2 mt-3"},we=["disabled"],Be={key:0,class:"animate-spin h-7 w-7 -mb-2 mr-3 pt-2 border-r-2 border-b-2 border-l-2 border-whtie rounded-full inline-block"},$e={__name:"index",setup(Ve){const s=O(),y=G();y.getBanks();const e=u({first_name:"",last_name:"",phone:"",email:"",ref_code:"",bank_code:"",bank_name:"",account_number:"",account_name:"",track_id:""});e.value.first_name=s.details.first_name,e.value.last_name=s.details.last_name,e.value.email=s.details.email,e.value.phone=s.details.phone,e.value.ref_code=s.details.referral_code,e.value.bank_name=s.details.bank_name,e.value.account_number=s.details.account_number,e.value.account_name=s.details.account_name,e.value.track_id=s.details.track_id;let p=u({}),B=u(!1),A=u([]);u(!1);let V=u(!1),f=u(!0),C=u(""),g=u(!1);s.details.bank_name.length>0&&U();const o=R({userphoneerror:!1,userphoneerrormsg:"",useraccterror:!1,useraccterrormsg:""});let b=u(!1);function T(r){e.value.bank_name=r,b.value=!1}function S(){b.value=!0;let r=e.value.bank_name,a=new RegExp(`${r}`,"gi"),h=y.banks.filter(n=>a.test(n.name)==!0);A.value=h}function U(){let r=y.banks.filter(a=>a.name==e.value.bank_name);r.length==0?(V.value=!1,f.value=!1,C.value="Bank does not exist. Choose from the Bank List."):r.length>0&&(V.value=!0,f.value=!0,e.value.bank_code=r[0].code)}function D(){let r=e.value.phone;var a=/[a-z]+/i;a.test(r)||r.length!=11?(o.userphoneerror=!0,o.userphoneerrormsg="<ul class='text-red-500'><li>Only numeric characters required</li><li>Number must be 11 digits</li></ul>"):(o.userphoneerror=!1,o.userphoneerrormsg="")}function E(){let r=e.value.account_number;var a=/[a-z]+/i;a.test(r)||r.length!=10&&r.length>0?(w.value=!1,o.useraccterror=!0,o.useraccterrormsg="<ul class='text-red-500'><li>Only numeric characters required</li><li>Account Number must be 10 digits</li></ul>"):(o.useraccterror=!1,o.useraccterrormsg="",L())}let x=u(""),w=u(!1),q=u(!1);function L(){let r=y.banks.filter(a=>a.name==e.value.bank_name);if(r.length>0&&e.value.account_number.length>0){w.value=!1,q.value=!0;let a=r[0].code,h={account_number:e.value.account_number,bank_code:a};s.verifyAccount(h).then(n=>{q.value=!1,w.value=!0,x.value=n.status,e.value.account_name=n.account_name})}}const M=j(()=>v.value==!0||!V.value||e.value.first_name.length<=0||e.value.last_name.length<=0||e.value.email.length<=0||e.value.phone.length<=0||e.value.account_name.length<=0||e.value.account_number.length<=0||e.value.bank_name.length<=0||o.userphoneerror==!0||o.useraccterror==!0);let v=u(!1);async function F(){B.value=!1,v.value=!0;try{return await s.updateUserdetails(e.value).then(r=>{v.value=!1,p.value=r,B.value=!0,g.value=!1,s.getUserDetails(s.details.track_id)})}catch(r){v.value=!1,g.value=!0,p.value=r}}return(r,a)=>{const h=H;return c(),i("div",null,[z(h),l("div",I,[l("form",{onSubmit:K(F,["prevent"])},[l("div",Q,[X,m(l("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>t(e).first_name=n),class:"p-3 caret-green-300 rounded-md w-full ring-0 bg-gray-200",id:"first_name",name:"first_name",type:"text",required:"",placeholder:""},null,512),[[_,t(e).first_name]])]),l("div",Z,[ee,m(l("input",{"onUpdate:modelValue":a[1]||(a[1]=n=>t(e).last_name=n),class:"p-3 rounded-md w-full ring-0 bg-gray-200",id:"last_name",name:"last_name",type:"text",required:"",placeholder:""},null,512),[[_,t(e).last_name]])]),l("div",te,[ae,m(l("input",{disabled:"","onUpdate:modelValue":a[2]||(a[2]=n=>t(e).email=n),class:"p-3 rounded-md w-full ring-0 bg-gray-200",id:"email",name:"email",type:"email",required:"",placeholder:"example@gmail.com"},null,512),[[_,t(e).email]])]),l("div",le,[ne,m(l("input",{"onUpdate:modelValue":a[3]||(a[3]=n=>t(e).phone=n),onKeyup:a[4]||(a[4]=n=>D()),class:"p-3 rounded-md w-full ring-0 bg-gray-200",id:"phone",name:"phone",type:"text",required:"",placeholder:"08020000300"},null,544),[[_,t(e).phone]]),t(o).userphoneerror?(c(),i("div",re,[l("p",{innerHTML:t(o).userphoneerrormsg},null,8,se)])):d("",!0)]),l("div",oe,[ue,m(l("input",{"onUpdate:modelValue":a[5]||(a[5]=n=>t(e).bank_name=n),onKeyup:S,onChange:L,onFocus:a[6]||(a[6]=n=>{$(b)?b.value=!0:b=!0,$(f)?f.value=!0:f=!0}),onBlur:a[7]||(a[7]=n=>U()),class:"p-3 rounded-md w-full ring-0 bg-gray-200",id:"bank_name",name:"bank_name",type:"text",required:"",placeholder:""},null,544),[[_,t(e).bank_name]]),t(b)?(c(),i("div",ie,[(c(!0),i(P,null,W(t(A),n=>(c(),i("p",{onClick:Ue=>{T(n.name),U()},class:"p-2 mt-1 cursor-pointer hover:bg-gray-100",key:n.code},k(n.name),9,ce))),128))])):d("",!0),t(f)?d("",!0):(c(),i("p",de,k(t(C)),1))]),l("div",me,[_e,m(l("input",{"onUpdate:modelValue":a[8]||(a[8]=n=>t(e).account_number=n),onKeyup:a[9]||(a[9]=n=>E()),class:"p-3 rounded-md w-full ring-0 bg-gray-200",id:"account_number",name:"account_number",type:"text",required:"",placeholder:""},null,544),[[_,t(e).account_number]]),t(o).useraccterror?(c(),i("div",pe,[l("p",{innerHTML:t(o).useraccterrormsg},null,8,fe)])):d("",!0)]),l("div",be,[ge,m(l("input",{"onUpdate:modelValue":a[10]||(a[10]=n=>t(e).account_name=n),class:"p-3 rounded-md w-full ring-0 bg-gray-200",id:"account_name",name:"account_name",type:"text",required:"",placeholder:""},null,512),[[_,t(e).account_name]]),t(q)?(c(),i("p",ve,"Verifying...")):d("",!0),t(w)?(c(),i("p",{key:1,class:N(["px-1 text-md font-semibold",{"text-green-600":t(x),"text-red-600":!t(x)}])},k(t(x)?"Account verified successfully":"Account could not be verified. Check the Account details again. You can type the Account name and proceed if you are sure the details are correct."),3)):d("",!0)]),l("div",he,[ke,m(l("input",{"onUpdate:modelValue":a[11]||(a[11]=n=>t(e).ref_code=n),disabled:"",class:"p-3 rounded-md w-full ring-0 bg-gray-200",id:"ref_code",name:"ref_code",type:"text",placeholder:""},null,512),[[_,t(e).ref_code]])]),t(B)||t(g)?(c(),i("div",{key:0,class:N([{"bg-green-300/[.6] text-green-800":t(p).status,"bg-red-400/[.40] text-red-900":!t(p).status||t(g)},"p-3 mt-3 text-left rounded-md"])},[l("p",null,k(t(p).message),1),t(g)?(c(),i("p",ye,k(t(p)),1)):d("",!0)],2)):d("",!0),l("div",xe,[l("button",{type:"submit",disabled:t(M),class:N([{"opacity-50":t(M)},"p-2 bg-[#0f8B8D] w-1/2 text-white rounded-md font-bold text-lg hover:bg-[#0a5556]"])},[t(v)?(c(),i("span",Be)):d("",!0),Y(" Update Profile ")],10,we)])],40,J)])])}}};export{$e as default};
