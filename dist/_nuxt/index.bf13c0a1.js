import{_ as P}from"./WelcomeBaseAdmin.b516bbda.js";import{q as V,e as W,r,D as $,f as M,a as n,h as v,b as t,c as k,u as e,E as h,j as u,T as F,F as E,B as G,C as z,o as a,l as m,t as o,i as I,v as R,k as b,G as U}from"./entry.9a5b8fbf.js";import{_ as q}from"./ModalBase.2f1919b6.js";import{c as B}from"./useStrings.2b5df556.js";import{g as H}from"./getters.e7c64068.js";import"./vend.d0cdc105.js";const L={class:"rounded-md bg-white pb-10"},O={class:"pt-10"},J=t("p",{class:"text-lg font-semibold text-center mt-3"},"Confirm Bank Details",-1),K={key:0,class:"p-3 bg-slate-300/[.35] rounded-md"},Q=t("p",{class:"font-bold"},"Amount will be sent to this Account.",-1),X={class:"flex flex-nowrap justify-between mt-3"},Y=t("p",{class:"w-1/2 text-lg font-medium"},"Account Number:",-1),Z={class:"w-1/2 font-bold text-left"},tt={class:"flex flex-nowrap justify-between"},et=t("p",{class:"w-1/2 text-lg font-medium"},"Account Bank :",-1),st={class:"w-1/2 font-bold text-left"},ot={class:"flex flex-nowrap justify-between"},lt=t("p",{class:"w-1/2 text-lg font-medium"},"Account Name:",-1),at={class:"w-1/2 font-bold text-left"},nt={key:1,class:"mt-3"},dt={class:"text-lg"},it=t("p",{class:"font-semibold text-lg mt-5"},"Amount to Withdrawal :",-1),rt=["max"],ct={key:0},mt={key:1},ut=["disabled"],pt={key:0,class:"animate-spin h-7 w-7 -mb-2 mr-3 pt-2 border-r border-b border-l-2 border-white rounded-full inline-block"},_t={class:"overflow-x-auto bg-slate-300/[.4] mt-10"},ft=z('<div class="flex flex-nowrap gap-4 justify-start lg:justify-around w-[800px] lg:w-full bg-slate-600/[.4] p-3 rounded-sm mb-4"><p class="text-sm w-[5%]">S/N</p><p class="text-sm w-[30%] mr-2 font-semibold">User</p><p class="text-sm w-[30%] mr-2 font-semibold">Recipient</p><p class="text-sm w-[30%] mr-2 font-semibold">Transaction type</p><p class="text-sm w-[30%] mr-2 font-semibold">Transaction Ref</p><p class="text-sm w-[30%] mr-2 font-semibold">Amount</p><p class="text-sm w-[30%] mr-2 font-semibold">Profit</p><p class="text-sm w-[30%] mr-2 font-semibold">Date</p><p class="w-[30%] font-semibold">Status</p></div>',1),bt={key:0,class:"flex flex-nowrap justify-start lg:justify-around w-[800px] lg:w-full bg-slate-100 gap-4 mt-3 rounded-sm p-3"},wt=t("p",null,"No Transactions",-1),xt=[wt],ht={key:1},gt={class:"text-sm w-[5%] font-semibold"},yt={class:"text-sm w-[30%] mr-2 overflow-x-auto font-semibold"},vt={class:"text-sm w-[30%] mr-2 overflow-x-auto font-semibold"},kt={class:"text-sm w-[30%] mr-2 break-words font-semibold"},Bt={class:"text-sm w-[30%] mr-2 font-semibold"},At={class:"text-sm w-[30%] mr-2 font-semibold text-green-600"},Nt=t("span",null,"+",-1),Dt={class:"text-sm w-[30%] mr-2 font-semibold"},jt={class:"w-[30%]"},Mt={__name:"index",async setup(Tt){let p,g;const A=V(),l=W();H();const w=r(!1);let _=r(!1),d=r({});r(!1),l.getProiftAnalysis();let x=r({});r("sms"),r("bg-white rounded-lg px-10");try{const i=([p,g]=$(()=>l.getTransactionAnalysis()),p=await p,g(),p);x.value=i.data}catch(i){console.log(i)}const c=r({amount:0,details:{userId:l.details.track_id,recipient_code:l.details.recipient_code}});function N(){l.$patch({modalshowing:!1}),w.value=!1}const y=M(()=>l.analysis.withdrawableBalance>c.value.amount),D=async()=>{_.value=!0;try{await A.withdrawFunds(c.value).then(i=>{_.value=!1,d.value=i,c.value.amount=0,l.getTransactionAnalysis(),setTimeout(()=>{l.getSiteDetails()},3e3)})}catch(i){_.value=!1,d.value=i}};return(i,f)=>{const j=P,T=U,C=q;return a(),n("div",null,[v(j),t("div",L,[t("div",O,[t("button",{onClick:f[0]||(f[0]=s=>w.value=!0),class:"p-3 rounded-md block border w-full lg:w-1/2 border-[#0f8B8D] text-[#0f8B8D] font-bold text-md hover:text-[#50b8ba] hover:border-[#50b8ba] lg:text-lg mx-auto"},"Withdraw Profit")]),(a(),k(F,{to:"body"},[e(w)?(a(),k(C,{key:0,onHideModal:N},{title:h(()=>[m("Withdraw your Earnings")]),body:h(()=>[J,e(l).details.recipient_code.length>0?(a(),n("div",K,[Q,t("div",X,[Y,t("p",Z,o(e(l).details.account_number),1)]),t("div",tt,[et,t("p",st,o(e(l).details.account_bank),1)]),t("div",ot,[lt,t("p",at,o(e(l).details.account_name),1)])])):(a(),n("div",nt,[t("p",dt,[m("Account Details is Incomplete. Please go to "),v(T,{class:"text-blue-600 text-bold",to:{name:"admin-settings-bankdetails"}},{default:h(()=>[m("your Profile")]),_:1}),m(" to update your account details before Withdrawal.")])])),it,I(t("input",{type:"number","onUpdate:modelValue":f[1]||(f[1]=s=>e(c).amount=s),min:"0",max:e(l).analysis.withdrawableBalance,class:"p-3 mt-2 rounded-lg border border-gray-400 w-full",placeholder:"3000"},null,8,rt),[[R,e(c).amount]]),e(d)?(a(),n("div",{key:2,class:b(["rounded-md p-3 mt-3",{"text-red-600 bg-red-600/[.2]":e(d).status==!1,"text-green-600 bg-green-600/[.2]":e(d).status==!0}])},[e(d).status==!1?(a(),n("p",ct,o(e(d).message)+".",1)):u("",!0),e(d).status==!0?(a(),n("p",mt,o(e(d).message),1)):u("",!0)],2)):u("",!0),t("button",{disabled:e(c).amount<=0||e(l).details.recipient_code.length<=0||!e(y),class:b([{"bg-[#0f8b8d89] hover:bg-[#0f8b8d89]":e(c).amount<=0||e(l).details.recipient_code.length<=0||!e(y)},"block w-full p-3 rounded-sm mt-3 font-semibold text-lg bg-[#0f8B8D] text-white hover:bg-[#13696a]"]),onClick:D},[e(_)?(a(),n("span",pt)):u("",!0),m(" Withdraw Profit")],10,ut)]),_:1})):u("",!0)])),t("div",_t,[ft,e(x).length==0?(a(),n("div",bt,xt)):(a(),n("div",ht,[(a(!0),n(E,null,G(e(x),(s,S)=>(a(),n("div",{key:s.id,class:"flex flex-nowrap justify-start lg:justify-around w-[800px] lg:w-full bg-slate-100 gap-4 mt-3 rounded-sm p-3"},[t("p",gt,o(S+1),1),t("p",yt,o(s.userDetails[0].last_name)+" "+o(s.userDetails[0].first_name),1),t("p",vt,o(s.recipient),1),t("p",kt,o(e(B)(s.transaction_type)),1),t("p",Bt,o(s.reference),1),t("p",{class:b(["text-sm w-[30%] mr-2 font-semibold",{"text-red-600":s.category=="debit","text-green-600":s.category=="credit"}])},[t("span",null,o(s.category=="debit"?"-":"+"),1),m(o(s.currency=="NGN"?"\u20A6":"$")+o(s.amount),1)],2),t("p",At,[Nt,m(o(s.currency=="NGN"?"\u20A6":"$")+o(s.profit),1)]),t("p",Dt,o(s.trnx_date),1),t("p",jt,[t("span",{class:b(["rounded-full text-center h-fit p-1 px-3 text-sm",{"bg-yellow-500/[.2] text-yellow-500":s.status=="pending"||s.status=="Pending","bg-red-600/[.2] text-red-600":s.status=="error","bg-green-600/[.2] text-green-600":s.status=="completed"||s.status=="Completed"||s.status=="success"}])},o(e(B)(s.status)),3)])]))),128))]))])])])}}};export{Mt as default};
