import{_ as A}from"./WelcomeBaseAdmin.b516bbda.js";import{e as V,r as l,f as E,a as r,h as B,b as t,w as N,i as v,v as g,u as e,t as m,j as d,k as y,l as U,o as i}from"./entry.9a5b8fbf.js";import"./ModalBase.2f1919b6.js";const C=t("p",{class:"text-center text-2xl font-bold"},"Credit Account",-1),D={class:"rounded-md bg-gray-100 p-2"},S={class:"rounded-md bg-white p-2 mt-3"},j=["onSubmit"],T={class:"mt-3"},M=t("label",{for:"subject",class:"block mb-3 font-medium text-lg pl-1"},"Email of Account",-1),W={key:0,class:"mt-1 text-green-600"},z={key:1,class:"animate-pulse font-semibold text-yellow-600"},I={key:2,class:"mt-1 text-red-600"},K={key:3,class:"mt-1 text-green-600"},O={key:4,class:"mt-1 text-red-600"},R={class:"mt-3"},$=t("label",{for:"amount",class:"block mb-3 font-medium text-lg pl-1"},"Amount",-1),q={class:"mt-3"},F=t("label",{for:"description",class:"block mb-3 font-medium text-lg pl-1"},"Description",-1),G={key:0},H={key:1},J={class:"text-center p-2 mt-3"},L=["disabled"],P={key:0,class:"animate-spin h-7 w-7 -mb-2 mr-3 pt-2 border-r-2 border-b-2 border-l-2 border-whtie rounded-full inline-block"},ee={__name:"credit",setup(Q){const f=V();l({}),l({}),l({}),l({});const s=l({recipient:"",amount:"",userId:f.details.track_id,transactionType:"credit-account",paymentChannel:"Website",description:""});let a=l({}),p=l(!1),n=l({}),b=l(!1);async function x(){p.value=!0,a.value={},b.value=!1;try{await f.validateUserEmail(s.value.recipient).then(o=>{a.value=o,p.value=!1})}catch(o){a.value=o,p.value=!1,b.value=!0}}let _=l(!1);async function k(){_.value=!0;try{await f.creditUserAccount(s.value).then(o=>{_.value=!1,n.value=o,s.value.amount=100,s.value.recipient="",s.value.description=""})}catch(o){_.value=!1,n.value=o}}const h=E(()=>_.value==!0||p.value==!0||a.value.status==!1||s.value.recipient.length==0||s.value.amount<=0);return(o,u)=>{const w=A;return i(),r("div",null,[B(w),C,t("div",D,[t("div",S,[t("form",{onSubmit:N(k,["prevent"])},[t("div",T,[M,v(t("input",{type:"email",onKeyup:u[0]||(u[0]=(...c)=>o.validate&&o.validate(...c)),onBlur:x,"onUpdate:modelValue":u[1]||(u[1]=c=>e(s).recipient=c),id:"recipient",placeholder:"Recipient's Email",class:"p-3 rounded-md w-full ring-0 border border-gray-200"},null,544),[[g,e(s).recipient]])]),e(a).status==!0?(i(),r("p",W,m(e(a).message),1)):d("",!0),e(p)?(i(),r("p",z,"Validating...")):d("",!0),e(a).status==!1?(i(),r("p",I,m(e(a).message),1)):d("",!0),e(a).status==!0?(i(),r("p",K,"Account Name : "+m(e(a).userName),1)):d("",!0),e(b)?(i(),r("p",O,m(e(a)),1)):d("",!0),t("div",R,[$,v(t("input",{type:"number",min:"100","onUpdate:modelValue":u[2]||(u[2]=c=>e(s).amount=c),id:"amount",class:"p-3 rounded-md w-full ring-0 border border-gray-200",placeholder:"3000"},null,512),[[g,e(s).amount]])]),t("div",q,[F,v(t("textarea",{"onUpdate:modelValue":u[3]||(u[3]=c=>e(s).description=c),rows:"3",id:"description",class:"p-3 rounded-md w-full ring-0 border border-gray-200",placeholder:"Enter description"},null,512),[[g,e(s).description]])]),e(n)?(i(),r("div",{key:5,class:y(["rounded-md p-3 mt-3",{"text-red-600 bg-red-600/[.2]":e(n).status==!1,"text-green-600 bg-green-600/[.2]":e(n).status==!0}])},[e(n).status==!1?(i(),r("p",G,m(e(n).message)+".",1)):d("",!0),e(n).status==!0?(i(),r("p",H,m(e(n).message),1)):d("",!0)],2)):d("",!0),t("div",J,[t("button",{disabled:e(h),class:y([{"opacity-50":e(h)},"p-2 bg-[#0f8B8D] w-full lg:w-1/2 text-white rounded-md font-bold text-lg hover:bg-[#0a5556]"]),type:"submit"},[e(_)?(i(),r("span",P)):d("",!0),U(" Credit Account ")],10,L)])],40,j)])])])}}};export{ee as default};
