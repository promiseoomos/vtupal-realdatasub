import{_ as D}from"./WelcomeBase.8ace50e6.js";import{_ as $}from"./StatsBoardBase.f0a7ecf6.js";import{q as C,r as u,f as W,a as d,h as m,b as e,u as t,c as y,E as x,j as _,T as F,F as S,B as V,C as M,o as l,l as r,t as o,i as E,v as G,k as h,G as R}from"./entry.a5fcd4f4.js";import{_ as z}from"./ModalBase.57ba2d8e.js";import{c as I}from"./useStrings.2b5df556.js";import{g as P}from"./getters.6b35f56b.js";import"./vend.e5739c9e.js";const U={class:"rounded-md bg-white pb-10"},q={class:"flex flex-wrap justify-between hidden p-3 pt-5"},H={class:"pt-10"},L=e("p",{class:"text-lg font-semibold text-center mt-3"},"Confirm Bank Details",-1),O={key:0,class:"p-3 bg-slate-300/[.35] rounded-md"},J={class:"font-bold"},K={class:"flex flex-nowrap justify-between mt-3"},Q=e("p",{class:"w-1/2 text-lg font-medium"},"Account Number:",-1),X={class:"w-1/2 font-bold text-left"},Y={class:"flex flex-nowrap justify-between"},Z=e("p",{class:"w-1/2 text-lg font-medium"},"Account Bank :",-1),tt={class:"w-1/2 font-bold text-left"},et={class:"flex flex-nowrap justify-between"},st=e("p",{class:"w-1/2 text-lg font-medium"},"Account Name:",-1),ot={class:"w-1/2 font-bold text-left"},at={key:1,class:"mt-3"},lt={class:"text-lg"},nt=e("p",{class:"font-semibold text-lg mt-5"},"Amount to Withdrawal :",-1),dt=["max"],it={key:0},rt={key:1},ct=["disabled"],ut={key:0,class:"animate-spin h-7 w-7 -mb-2 mr-3 pt-2 border-r border-b border-l-2 border-white rounded-full inline-block"},mt=e("p",{class:"text-center text-lg font-bold"},"Referrals Table",-1),_t={class:"mt-10 overflow-x-auto"},pt=M('<div class="flex flex-nowrap gap-4 justify-start lg:justify-around w-[800px] lg:w-full p-3 bg-slate-600/[.4] rounded-sm mb-4"><p class="text-sm w-[20%]">S/N</p><p class="text-sm w-[20%] font-semibold">Referral Name</p><p class="text-sm w-[20%] font-semibold">Date referred</p><p class="text-sm w-[20%] font-semibold">Amount</p><p class="text-sm w-[20%] font-semibold">status</p></div>',1),ft={class:"text-sm w-[20%] font-semibold"},bt={class:"text-sm w-[20%] font-semibold"},wt={class:"text-sm w-[20%] font-semibold"},xt={class:"text-sm w-[20%] mr-2 font-semibold text-green-600"},ht={class:"w-[20%]"},At={__name:"index",setup(gt){const s=C(),v=P(),b=u(!1);let p=u(!1),n=u({});u(!1);const i=u({amount:0,details:{userId:s.details.track_id,recipient_code:s.details.recipient_code}});function k(){s.$patch({modalshowing:!1}),b.value=!1}const g=W(()=>s.details.wallet_balance-50>i.value.amount),N=async()=>{p.value=!0;try{await s.withdrawFunds(i.value).then(c=>{p.value=!1,n.value=c,i.value.amount=0,s.getTransactions(),setTimeout(()=>{s.getUserDetails(s.details.track_id)},3e3),console.log(c)})}catch(c){p.value=!1,n.value=c}};return(c,f)=>{const B=D,w=$,j=R,T=z;return l(),d("div",null,[m(B),e("div",U,[e("div",q,[m(w,{class:"w-1/3",title:"Total Earnings",symbol:t(s).details.currency=="NGN"?"\u20A6":"$",value:2e3},null,8,["symbol"]),m(w,{class:"w-1/3",title:"Total Referrals",value:20}),m(w,{class:"w-1/3",title:"Total Withdrawal",symbol:t(s).details.currency=="NGN"?"\u20A6":"$",value:1800},null,8,["symbol"])]),e("div",H,[e("button",{onClick:f[0]||(f[0]=a=>b.value=!0),class:"p-3 rounded-md block border w-full lg:w-1/2 border-[#0f8B8D] text-[#0f8B8D] font-bold text-md hover:text-[#50b8ba] hover:border-[#50b8ba] lg:text-lg mx-auto"},"Withdraw Funds")]),(l(),y(F,{to:"body"},[t(b)?(l(),y(T,{key:0,onHideModal:k},{title:x(()=>[r("Withdraw your Earnings")]),body:x(()=>[L,t(s).details.recipient_code.length>0?(l(),d("div",O,[r(o()+" ",1),e("p",J,"Amount will be sent to the Following Account. A flat charge of "+o(t(s).details.currency)+" 50 will be applied",1),e("div",K,[Q,e("p",X,o(t(s).details.account_number),1)]),e("div",Y,[Z,e("p",tt,o(t(s).details.bank_name),1)]),e("div",et,[st,e("p",ot,o(t(s).details.account_name),1)])])):(l(),d("div",at,[e("p",lt,[r("Account Details is Incomplete. Please go to "),m(j,{class:"text-blue-600 text-bold",to:{name:"dashboard-settings-myprofile"}},{default:x(()=>[r("your Profile")]),_:1}),r(" to update your account details before Withdrawal.")])])),nt,E(e("input",{type:"number","onUpdate:modelValue":f[1]||(f[1]=a=>t(i).amount=a),min:"0",max:t(s).details.wallet_balance-50,class:"p-3 mt-2 rounded-lg border border-gray-400 w-full",placeholder:"3000"},null,8,dt),[[G,t(i).amount]]),t(n)?(l(),d("div",{key:2,class:h(["rounded-md p-3 mt-3",{"text-red-600 bg-red-600/[.2]":t(n).status==!1,"text-green-600 bg-green-600/[.2]":t(n).status==!0}])},[t(n).status==!1?(l(),d("p",it,o(t(n).message)+".",1)):_("",!0),t(n).status==!0?(l(),d("p",rt,o(t(n).message),1)):_("",!0)],2)):_("",!0),e("button",{disabled:t(i).amount<=0||t(s).details.recipient_code.length<=0||!t(g),class:h([{"bg-[#0f8b8d89] hover:bg-[#0f8b8d89]":t(i).amount<=0||t(s).details.recipient_code.length<=0||!t(g)},"block w-full p-3 rounded-sm mt-3 font-semibold text-lg bg-[#0f8B8D] text-white hover:bg-[#13696a]"]),onClick:N},[t(p)?(l(),d("span",ut)):_("",!0),r(" Withdraw ")],10,ct)]),_:1})):_("",!0)])),mt,e("div",_t,[pt,(l(!0),d(S,null,V(t(v).referrals.data,(a,A)=>(l(),d("div",{key:a.id,class:"flex flex-nowrap justify-start lg:justify-around w-[800px] lg:w-full gap-4 mt-3 bg-slate-100 rounded-sm p-3"},[e("p",ft,o(A+1),1),e("p",bt,o(a.name),1),e("p",wt,o(a.dateReferred),1),e("p",xt,"+"+o(t(s).details.currency=="NGN"?"\u20A6":"$")+o(a.amount),1),e("p",ht,[e("span",{class:h(["rounded-full text-center h-fit p-1 px-3 text-sm",{"bg-yellow-500/[.2] text-yellow-500":a.status=="unredeemed","bg-red-600/[.2] text-red-600":a.status=="error","bg-green-600/[.2] text-green-600":a.status=="redeemed"}])},o(t(I)(a.status)),3)])]))),128))])])])}}};export{At as default};
