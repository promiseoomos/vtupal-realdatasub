import{q as C,r as w,s as T,Q as V,M,f as D,a as l,b as t,u as e,w as N,i as b,v as f,j as c,k as v,l as _,t as k,h as S,E as L,G as R,o as n}from"./entry.9a5b8fbf.js";import{g as U}from"./useBaseurl.c38e64e4.js";const A={class:"h-screen p-3 pb-3"},E=t("p",{class:"text-3xl text-center mt-3"},"Welcome to Akfemtopup",-1),j={class:"mt-16 p-5 bg-[#F7DBA7]/[.5] mx-auto w-full lg:w-1/3 rounded-lg mb-7"},H=t("div",{class:"text-center"},[t("p",{class:"text-xl border-b-4 border-black mx-auto w-fit"},"Reset your Password")],-1),$={class:"text-left p-3"},z={key:0},F=["onSubmit"],G={class:"mt-3"},K=t("label",{class:"block mb-3 pl-2",for:"password"},"Password:",-1),O={class:"mt-3"},Q=t("label",{class:"block mb-3 pl-2",for:"cpassword"},"Confirm Password:",-1),W={key:0,class:""},I=["innerHTML"],J={class:"mt-3 font-bold"},X={class:"text-center p-2 mt-3"},Y=["disabled"],Z={key:0,class:"animate-spin h-7 w-7 -mb-2 mr-3 pt-2 border-r-2 border-b-2 border-l-2 border-whtie rounded-full inline-block"},ee={key:1},se={key:0,class:"mt-3"},te=t("label",{class:"block mb-3 pl-2 font-medium text-lg",for:"email"},"Account Email:",-1),oe={class:"text-center p-2 mt-3"},ae=["disabled"],re={key:0,class:"animate-spin h-7 w-7 -mb-2 mr-3 pt-2 border-r-2 border-b-2 border-l-2 border-whtie rounded-full inline-block"},ue={__name:"passwordreset",setup(le){const h=C(),s=w({email:"",password:"",confirm_password:"",token:""});let d=w({}),i=w(!1),p=T();const x=V();U(x);const u=M({userphoneerror:!1,userphoneerrormsg:"",unmatchpassword:!1,unmatchpasswordmsg:""});function y(){let r=s.value.password,o=s.value.confirm_password;r.length<8?(u.unmatchpassword=!0,u.unmatchpasswordmsg="<b class='text-red-500'>Passwords must be 8 Characters or more</b>"):r!=o?(u.unmatchpassword=!0,u.unmatchpasswordmsg="<b class='text-red-500'>Passwords do not match</b>"):(u.unmatchpassword=!1,u.unmatchpasswordmsg="")}const g=D(()=>!!(a.value||s.value.password.length<=0||u.unmatchpassword==!0));let a=w(!1);const q=async()=>{i.value=!1,a.value=!0;try{return await h.resetToken(s.value.email).then(r=>{a.value=!1,d.value=r,i.value=!0,s.value.email="",s.value.password="",s.value.confirm_password="",s.value.token=""})}catch(r){a.value=!1,d.value=r,i.value=!0}};async function B(){i.value=!1,a.value=!0,s.value.email=p.query.email,s.value.token=p.query.token;try{return await h.resetPassword(s.value).then(r=>{a.value=!1,d.value=r,i.value=!0,s.value.email="",s.value.password="",s.value.confirm_password="",s.value.token=""})}catch(r){a.value=!1,d.value=r,i.value=!0}}return(r,o)=>{const P=R;return n(),l("div",null,[t("div",A,[E,t("div",j,[H,t("div",$,[e(p).query.token?(n(),l("div",z,[t("form",{onSubmit:N(B,["prevent"])},[t("div",G,[K,b(t("input",{"onUpdate:modelValue":o[0]||(o[0]=m=>e(s).password=m),class:"p-3 rounded-md w-full ring-3 ring-red-300 outline-0",id:"password",name:"password",type:"password",required:"",placeholder:"************"},null,512),[[f,e(s).password]])]),t("div",O,[Q,b(t("input",{"onUpdate:modelValue":o[1]||(o[1]=m=>e(s).confirm_password=m),onKeyup:o[2]||(o[2]=m=>y()),class:"p-3 rounded-md w-full ring-3 ring-red-300 outline-0",id:"cpassword",name:"cpassword",type:"password",required:"",placeholder:"************"},null,544),[[f,e(s).confirm_password]]),e(u).unmatchpassword?(n(),l("div",W,[t("p",{innerHTML:e(u).unmatchpasswordmsg},null,8,I)])):c("",!0)]),e(i)?(n(),l("div",{key:0,class:v([{"bg-green-300/[.6] text-green-800":e(d).status,"bg-red-400/[.40] text-red-900":!e(d).status},"p-3 mt-3 text-left rounded-md"])},[t("p",null,[_(k(e(d).message)+" ",1),t("span",J,[S(P,{to:{name:"login"},class:"text-[#4B4237] hover:text-[#978269]"},{default:L(()=>[_("Login")]),_:1})])])],2)):c("",!0),t("div",X,[e(p).query.token?(n(),l("button",{key:0,disabled:e(g),type:"submit",class:v([{"opacity-50":e(g)},"p-2 bg-[#0f8B8D] w-1/2 text-white rounded-md font-bold text-lg hover:bg-[#0a5556]"])},[e(a)?(n(),l("span",Z)):c("",!0),_(" Reset Password ")],10,Y)):c("",!0)])],40,F)])):(n(),l("div",ee,[e(p).query.token?c("",!0):(n(),l("div",se,[te,b(t("input",{"onUpdate:modelValue":o[3]||(o[3]=m=>e(s).email=m),class:"p-3 rounded-md w-full ring-0",id:"email",name:"email",type:"email",required:"",placeholder:"example@gmail.com"},null,512),[[f,e(s).email]])])),e(i)?(n(),l("div",{key:1,class:v([{"bg-green-300/[.6] text-green-800":e(d).status,"bg-red-400/[.40] text-red-900":!e(d).status},"p-3 mt-3 text-left rounded-md"])},[t("p",null,k(e(d).message),1)],2)):c("",!0),t("div",oe,[e(p).query.token?c("",!0):(n(),l("button",{key:0,onClick:o[4]||(o[4]=m=>q()),disabled:e(a).value||e(s).email.length<=0,class:v([{"opacity-50":e(a).value||e(s).email.length<=0},"p-2 bg-[#0f8B8D] w-1/2 text-white rounded-md font-bold text-lg hover:bg-[#0a5556]"])},[e(a)?(n(),l("span",re)):c("",!0),_(" Send Token Mail ")],10,ae))])]))])])])])}}};export{ue as default};
